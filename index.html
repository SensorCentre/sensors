<!DOCTYPE html>
<html>
  <head>
      <title>Sensors COMP3203 - A2</title>
      <script type="text/javascript" src="js/d3.v4.js"></script>
      <script type="text/javascript" src="js/d3-tip.js"></script>
      <script type="text/javascript" src="js/sensors.js"></script>
      <script type="text/javascript" src="js/NodeObject.js"></script>
      <script type="text/javascript" src="js/RigidCoverageAlgorithm.js"></script>
      <script type="text/javascript" src="js/SimpleCoverageAlgorithm.js"></script>
      <script type="text/javascript" src="js/SensorBar.js"></script>
      <script type="text/javascript" src="js/LineChart.js"></script>
      <link rel="stylesheet" href="http://rawgithub.com/Caged/d3-tip/master/examples/example-styles.css">
  </head>
  <body>
    <header id="header">
      <h1> Sensors: Assignment 2 - COMP3203 </h1>
      <h3> Developed By: Alex, Basim, Chris </h3>
    </header>

    <div id="fields">
        <span>Node Radius:</span> </br>
        <input type="number" id="radius" min ="0"/> </br>
        <span>Number of Sensors:</span> </br>
        <input type="number" id="num_of_sensors" min ="0"/> </br>
        </br>
        <span><b>Algorithm:</b></span> </br>
        <input type="radio" id="rigid" name="algorithm" value="rigid" checked> Rigid<br>
        <input type="radio" id="simple" name="algorithm" value="simple"> Simple<br>
        </br>
        <button  id = "start_button" name="start" onclick="runSimulation()"> Start </button>
        <button  id = "reset" name="reset" onclick="resetSimulation()"> Reset </button>
    </div>
    <div id= "movement">
        </br>
        <span> <b> Movement count: </b> </span>
        <span id="count">0</span>
     </div>
    <div id="graphic"> </div>
    <div class="chart" id="sensor-bar"></div>
    <script type="text/javascript">
        // SENSOR BAR DEMO CODE
        function drawSensorBar() {
            var updateSensorBar = createSensorBar({
                chartid: "sensor-bar",
                chartTitle: "Sensor Bar",
                yAxisLabel: "",
                colors: ["#389B34", "#381234", "#A41267"]
            });

            function sleep(ms) {
              return new Promise(resolve => setTimeout(resolve, ms));
            }

            async function demo() {
                var rand = d3.randomUniform(0,1);
                while(true) {
                    nodes = [];
                    for (n in [1,2,3,4,5,6,7,8,9,10]) {
                        var radius   = rand() / 6;
                        var xpos     = rand();
                        var sensorID = n;
                        nodes.push(createNode(radius, xpos, sensorID));
                    }
                    updateSensorBar(nodes);
                    await sleep(1000);
                }
            }
            demo();
        }

        drawSensorBar();
    </script>

  </body>
</html>
